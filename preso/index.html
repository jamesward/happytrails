<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Play vs. Grails Smackdown</title>

    <meta name="description"
          content="Play 2 and Grails 2 are often hyped as the most productive JVM Web Frameworks.
          This presentation (and companion talk) compare and contrast these two modern web frameworks.">
    <meta name="author" content="James Ward and Matt Raible">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/smackdown.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <script src="https://www.google.com/jsapi"></script>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section id="intro">
    <h1>Play vs. Grails Smackdown</h1>

    <h3 class="inverted">James Ward and Matt Raible</h3>

    <p><a href="https://twitter.com/_jamesward">@_JamesWard</a> and <a href="https://twitter.com/mraible">@mraible</a></p>
    <script>
        // Delicously hacky. Look away.
        if (navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/i)) document.write('<p style="color: rgba(0,0,0,0.3); text-shadow: none;">(' + 'Swipe to navigate' + ')</p>');
    </script>
    <p class="themes">
        Theme:
        <a href="?theme=sky#/themes">Sky</a> -
        <a href="?theme=beige#/themes">Beige</a> -
        <a href="?theme=simple#/themes">Simple</a> -
        <a href="?theme=serif#/themes">Serif</a> -
        <a href="?theme=night#/themes">Night</a> -
        <a href="?#/themes">Default</a>
    </p>
    <div class="footer">
        <header>
            Changelog
        </header>
        <ul>
            <li>September 24, 2013: Updated <a href="https://github.com/jamesward/happytrails/commit/e5af757f5833e2617c33f14246a42a817a13c9fb">statistics</a> for
                <a href="https://oracleus.activeevents.com/2013/connect/sessionDetail.ww?SESSION_ID=2863&tclass=popup">JavaOne</a>.</li>
            <li>March 24, 2013: Updated <a href="https://github.com/jamesward/happytrails/commit/43795059fcd3d321ab93ea14dc149a3c762daf47">statistics</a>
                and <a href="https://github.com/jamesward/happytrails/commit/9654e74e61c03ccd916ee839885503e206339c81">load tests</a> for
                <a href="http://www.devoxx.com/display/FR13/Play+Framework+vs.+Grails+Smackdown">Devoxx France</a>.</li>
            <li>June 24, 2012: <a href="https://gist.github.com/2973705">Play Performance Fix</a>.</li>
            <li>June 19, 2012: Published for <a href="http://uberconf.com/">ÃœberConf</a>.</li>
        </ul>
    </div>
</section>

<section id="why">
    <h2>Why a Smackdown?</h2>

    <p>
        Play 2 and Grails 2 are often hyped as the <b>most productive</b> JVM Web Frameworks.
    </p>

    <p style="margin-top: 100px">
        <i>
            <small>* We wanted to know how they enhanced the Developer Experience (DX).</small>
        </i>
    </p>
</section>

<section id="requirements">
    <h2>Happy Trails Requirements</h2>
    <br/>

    <div class="column2">
        <ul>
            <li>Server-side Templates</li>
            <li>Play 2 with Java</li>
            <li>Form Validation</li>
            <li>Data Pagination</li>
            <li>Authentication</li>
            <li>Scheduled Jobs</li>
        </ul>
        <ul>
            <li>Atom / RSS</li>
            <li>Email Notifications</li>
            <li>Unit / Integration Tests</li>
            <li>Load Tests</li>
            <li>Performance Tests</li>
        </ul>
    </div>
    <br/>

    <p>Stretch Goals: Search, Photo Upload to S3</p>
</section>

<section id="schedule">
    <h2>Our Schedule</h2>
    <ul>
        <li>Week 1 - Data Model Definition</li>
        <li>Week 2 - Data Layer & URL Design</li>
        <li>Week 3 - Controllers & Auth</li>
        <li>Week 4 - Views</li>
        <li>Week 5 - Misc Polish</li>
    </ul>
</section>

<section>
    <section>
        <h1>Intro to Play 2</h1>
        <br/>
        <img src="assets/images/play_framework.png">
    </section>
    <section>
        <div class="comparison" style="margin: 0 auto; width: 700px">
            <blockquote class="quote">Play Framework is based on a lightweight, stateless, web-friendly architecture.  Built on Akka, Play provides predictable and minimal resource consumption (CPU, memory, threads) for highly-scalable applications.</blockquote>
        </div>
    </section>
    <section>
        <h2>My Top 10 Favorite Features</h2>
        <ol>
            <li>Just hit refresh workflow</li>
            <li>Type safety</li>
            <li>RESTful</li>
            <li>Stateless</li>
            <li>Reactive</li>
            <li>Asset Compiler</li>
            <li>First-class JSON</li>
            <li>Java &amp; Scala</li>
            <li>Templates in Activator</li>
            <li>LinkedIn, Gawker, etc</li>
        </ol>
    </section>
</section>
<section>
    <section>
        <h1>Intro to Grails 2</h1>
        <img src="assets/images/grails_framework.png"/>
    </section>
    <section>
        <div class="comparison" style="margin: 0 auto; width: 700px">
            <blockquote class="quote">
              Powered by Spring, Grails outperforms the competition. Dynamic, agile web development without compromises.
            </blockquote>
            <blockquote class="fragment faded">
              <span style="opacity: 0">Powered by </span>Spring<span style="opacity: 0">, Grails outperforms the competition. Dynamic, agile web development without compromises.</span>
            </blockquote>
        </div>
    </section>
    <section>
        <h2>My Top 10 Favorite Features</h2>
        <ol>
            <li>Documentation</li>
            <li>Clean URLs</li>
            <li>GORM</li>
            <li>IntelliJ IDEA Support</li>
            <li>Zero Turnaround</li>
            <li>Excellent Testing Support</li>
            <li>Groovy</li>
            <li>GSPs</li>
            <li>Resource Optimizer</li>
            <li>Instant Deployment on Heroku</li>
        </ol>
    </section>
</section>

<section>
    <h2>Our Setup</h2>
    <ul>
      <li><strong>IntelliJ IDEA</strong> for Development</li>
      <li><strong>GitHub</strong> for Source Control</li>
      <li><strong>CloudBees</strong> for Continuous Integration</li>
      <li><strong>Heroku</strong> for Production</li>
    </ul>

    <p style="margin-top: 30px">Later added: QA Person and BrowserMob</p>
</section>

<section>
<section>
    <h2>Code Walk Through</h2>

    <p>
        We developed the same app, in similar ways, so let's look at the different layers.
    </p>
    <br/>

    <div class="column2">
        <ul>
            <li><a href="#/7/1">Database</a></li>
            <li><a href="#/7/4">URL Mapping</a></li>
            <li><a href="#/7/6">Models</a></li>
            <li><a href="#/7/8">Controllers</a></li>
            <li><a href="#/7/10">Views</a></li>
            <li><a href="#/7/12">Validation</a></li>
            <li><a href="#/7/14">IDE Support</a></li>
        </ul>
        <ul class="right-column">
            <li><a href="#/7/16">Job</a></li>
            <li><a href="#/7/18">Feed</a></li>
            <li><a href="#/7/20">Email</a></li>
            <li><a href="#/7/22">Photo Upload</a></li>
            <li><a href="#/7/24">Testing</a></li>
            <li><a href="#/7/26">Demo Data</a></li>
            <li><a href="#/7/28">Configuration</a></li>
            <li><a href="#/7/30">Authentication</a></li>
        </ul>
    </div>
    <div class="down-arrow">&darr;</div>
</section>

<section>
    <h3>Database - Grails</h3>
    <ul>
        <li>Hibernate is the default persistence provider</li>
        <li>Create models, Hibernate creates the schema for you</li>
    </ul>

    <p id="grails-ds-filename" class="filename">grails-app/conf/DataSource.groovy</p>
    <script>
        // todo: refactor to use data-attributes to define metadata for code
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = "#grails-ds";
            getSrc("13cf83c", "grails-app/conf/DataSource.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '13cf83c', 13, 19);
            }, 13, 19);
        })})
    </script>
    <pre><code id="grails-ds"></code></pre>
</section>
<section>
    <h3>Database - Play</h3>
    <ul>
        <li>EBean is the default persistence provider in Java projects</li>
        <li>Evolutions can be auto-applied</li>
        <li>Initial evolution sql is auto-created</li>
        <li>Subsequent changes must be versioned</li>
        <li>Auto-created schema file is database dependent</li>
        <li>Play 2 supports multiple datasources (Play 1 does not)</li>
    </ul>

    <p id="playsql2-filename" class="filename">conf/evolutions/default/2.sql</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = "#playsql2";
            getSrc("9e33de5", "conf/evolutions/default/2.sql", function (content) {
                $(selectorId).html(hljs.highlightAuto(content).value);
                linkToFile(selectorId, '9e33de5');
            })
        })})
    </script>
    <pre><code id="playsql2"></code></pre>
</section>
<section>
    <h3>Database - Play</h3>

    <p>Using Heroku Postgres in production rocks!</p>
    <ul>
        <li>Postgres 9.1</li>
        <li>Dataclips</li>
        <li>Fork & Follow</li>
        <li>Multi-Ingres</li>
    </ul>
</section>

<section>
    <h3>URL Mapping - Grails</h3>

    <p id="grails-urls-filename" class="filename">grails-app/conf/UrlMappings.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-urls';
            getSrc("443a814", "grails-app/conf/UrlMappings.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre style="max-height: 500px;"><code id="grails-urls"></code></pre>
</section>
<section>
    <h3>URL Mapping - Play</h3>

    <p id="playconfroutes-filename" class="filename">conf/routes</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playconfroutes';
            getSrc("6f48713", "conf/routes", function (content) {
                $(selectorId).html(hljs.highlightAuto(content).value);
                linkToFile(selectorId, '6f48713', 6);
            }, 6)
        })})
    </script>
    <pre style="max-height: 460px; height: 460px;"><code id="playconfroutes" style="width: 820px; font-size: 12px; line-height: 13px;"></code></pre>
</section>

<section>
    <h3>Models - Grails</h3>
    <ul>
        <li>All properties are persisted by default</li>
        <li>Constraints</li>
        <li>Mappings with hasMany and belongsTo</li>
        <li>Override methods for lifecycle events</li>
    </ul>
    <p id="grails-models-filename" class="filename">grails-app/domain/happytrails/Region.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-models';
            getSrc("443a814", "grails-app/domain/happytrails/Region.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre style="max-height: 460px;"><code id="grails-models"></code></pre>
</section>
<section>
    <h3>Models - Play</h3>
    <ul>
        <li>EBean + JPA Annotations</li>
        <li>Declarative Validations (JSR 303)</li>
        <li>Query DSL</li>
        <li>Lazy Loading (except in Scala Templates)</li>
    </ul>

    <p id="playebean-filename" class="filename">app/models/Direction.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playebean';
            getSrc("9e33de5", "app/models/Direction.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '9e33de5', 11, 27);
            }, 11, 27)
        })})
    </script>
    <pre style="height: 350px"><code id="playebean"></code></pre>
</section>
<section>
    <h3>Controllers - Grails</h3>

    <p id="grails-controller-filename" class="filename">grails-app/controllers/happytrails/HomeController.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-controller';
            getSrc("ea911b6", "grails-app/controllers/happytrails/HomeController.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'ea911b6');
            })
        })})
    </script>
    <pre><code id="grails-controller"></code></pre>
</section>
<section>
    <h3>Controllers - Play</h3>

    <ul>
        <li>Stateless - Composable - Interceptable</li>
        <li>Clean connection between URLs and response code</li>
    </ul>

    <p id="playcontroller-filename" class="filename">app/controllers/RouteController.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playcontroller';
            getSrc("5d8ab80", "app/controllers/RouteController.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '5d8ab80', 11, 36);
            }, 11, 36)
        })})
    </script>
    <pre><code id="playcontroller" style="width: 820px; font-size: 12px; line-height: 13px;"></code></pre>
</section>

<section>
    <h3>Views - Grails</h3>
    <ul>
      <li>Groovy Server Pages, like JSPs</li>
      <li>GSP Tags</li>
      <li>Layouts and Templates</li>
      <li>Optimized Resources</li>
    </ul>
    <p id="grails-view-filename" class="filename">grails-app/views/region/show.gsp</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-view';
            getSrc("443a814", "grails-app/views/region/show.gsp", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre style="height: 350px"><code id="grails-view"></code></pre>
</section>
<section>
    <h3>Views - Play</h3>

    <ul>
        <li>Scala Templates</li>
        <li>Composable</li>
        <li>Compiled</li>
    </ul>

    <p id="playview-filename" class="filename">app/views/region.scala.html</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playview';
            getSrc("6f48713", "app/views/region.scala.html", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '6f48713', 1, 18);
            }, 1, 18)
        })})
    </script>
    <pre><code id="playview"></code></pre>
</section>

<section>
    <h3>Validation - Grails</h3>
    <p id="grails-controller-validation-filename" class="filename">grails-app/controllers/happytrails/RouteController.groovy</p>
    <script>
          $(function() { Reveal.addEventListener( 'ready', function( event ) {
              var selectorId = '#grails-controller-validation';
              getSrc("443a814", "grails-app/controllers/happytrails/RouteController.groovy", function (content) {
                  $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                  linkToFile(selectorId, '443a814', 22, 31);
              }, 22, 31)
          })})
    </script>
    <pre style="font-size: 15px"><code id="grails-controller-validation"></code></pre>

    <p id="grails-view-validation-filename" class="filename">grails-app/views/route/create.gsp</p>
    <script>
          $(function() { Reveal.addEventListener( 'ready', function( event ) {
              var selectorId = '#grails-view-validation';
              getSrc("443a814", "grails-app/views/route/create.gsp", function (content) {
                  $(selectorId).html(hljs.highlight("java", content.replace(/\n            /g, "\n").replace(/^            /g, "")).value);
                  linkToFile(selectorId, '443a814', 25, 31);
              }, 25, 31)
          })})
      </script>
      <pre style="font-size: 15px"><code id="grails-view-validation"></code></pre>
</section>
<section>
    <h3>Validation - Play</h3>

    <p id="playhaserrors-filename" class="filename">app/controllers/RouteController.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playhaserrors';
            getSrc("6f48713", "app/controllers/RouteController.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/            /g, "")).value);
                linkToFile(selectorId, '6f48713', 24, 28);
            }, 24, 28)
        })})
    </script>
    <pre style="font-size: 16px"><code id="playhaserrors"></code></pre>

    <p id="playform-filename" class="filename">app/views/signupForm.scala.html</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playform';
            getSrc("9e33de5", "app/views/signupForm.scala.html", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '9e33de5', 7, 18);
            }, 7, 18)
        })})
    </script>
    <pre style="font-size: 16px"><code id="playform"></code></pre>
</section>

<section>
    <h3>IDE Support - Grails</h3>

    <p><img src="assets/images/grails-intellij.png" width="80%"/></p>

    <p class="footnote"><em>IntelliJ Rocks!</em></p>
</section>
<section>
    <h3>IDE Support - Play</h3>

    <br/>
    <ul>
        <li>$ play idea</li>
        <li>$ play eclipsify<br/><br/></li>
        <li>Java!!!</li>
        <li>Debugging Support via Remote Debugger</li>
        <li>Limited Testing within IDE</li>
    </ul>
</section>

<section>
    <h3>Job - Grails</h3>

    <p id="grails-job-filename" class="filename">grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-job';
            getSrc("443a814", "grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre><code id="grails-job"></code></pre>
</section>
<section>
    <h3>Job - Play</h3>

    <br/>
    <ul>
        <li>Plain old `static void main`</li>
        <li>Independent of web app</li>
    </ul>
    <br/>
    <br/>

    <p id="playjob-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playjob';
            getSrc("7f7d163", "app/jobs/DailyRegionDigestEmailJob.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '7f7d163', 15, 23);
            }, 15, 23)
        })})
    </script>
    <pre><code id="playjob"></code></pre>
</section>

<section>
    <h3>Feed - Grails</h3>

    <ol>
      <li>grails install-plugin feeds</li>
      <li>Add feed() method to controller</li>
    </ol>

    <p id="grails-feed-filename" class="filename">grails-app/controllers/happytrails/RegionController.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-feed';
            getSrc("103ac6a", "grails-app/controllers/happytrails/RegionController.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '103ac6a', 99, 117);
            }, 99, 117)
        })})
    </script>
    <pre style="max-height: 460px;"><code id="grails-feed"></code></pre>
</section>
<section>
    <h3>Feed - Play</h3>

    <br/>
    <ul>
        <li>No direct RSS/Atom support</li>
        <li>Dependency: "rome" % "rome" % "1.0"</li>
    </ul>

    <p id="playfeed-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playfeed';
            getSrc("8b7fb4a", "app/jobs/DailyRegionDigestEmailJob.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n        /g, "\n").replace(/^        /g, "")).value);
                linkToFile(selectorId, '8b7fb4a', 22, 36);
            }, 22, 36)
        })})
    </script>
    <pre><code id="playfeed"></code></pre>
</section>

<section>
    <h3>Email - Grails</h3>

    <p id="grails-email-filename" class="filename">grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-email';
            getSrc("443a814", "grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n        /g, "\n").replace(/^        /g, "")).value);
                linkToFile(selectorId, '443a814', 19, 24);
            }, 19, 24)
        })})
    </script>
    <pre><code id="grails-email" style="padding-left: 0 !important"></code></pre>
    <p style="margin-top: 30px">
        <small>* powered by the <a href="http://grails.org/plugin/mail">mail plugin</a>
            (built-in)
        </small>
    </p>
</section>
<section>
    <h3>Email - Play</h3>

    <ul>
        <li>SendGrid Heroku Add-on</li>
        <li>Dependency:<br/>"com.typesafe" %% "play-plugins-mailer" % "2.0.2"</li>
    </ul>
    <br/>

    <p id="playemailsend-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playemailsend';
            getSrc("7f7d163", "app/jobs/DailyRegionDigestEmailJob.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/            /g, "")).value);
                linkToFile(selectorId, '7f7d163', 35, 39);
            }, 35, 39)
        })})
    </script>
    <pre style="font-size: 17px"><code id="playemailsend"></code></pre>

    <p id="playemailconfig-filename" class="filename">conf/prod.conf</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playemailconfig';
            getSrc("860b7b4", "conf/prod.conf", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '860b7b4', 9, 13);
            }, 9, 13)
        })})
    </script>
    <pre style="font-size: 18px"><code id="playemailconfig"></code></pre>
</section>

<section>
    <h3>Photo Upload - Grails</h3>
</section>
<section>
    <h3>Photo Upload - Play</h3>

    <ul>
        <li>Amazon S3 for Persistent File Storage</li>
    </ul>

    <p id="plays3photo-filename" class="filename">app/models/S3Photo.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#plays3photo';
            getSrc("73a977a", "app/models/S3Photo.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/        /g, "")).value);
                linkToFile(selectorId, '73a977a', 57, 65);
            }, 57, 65)
        })})
    </script>
    <pre style="width: 900px;"><code id="plays3photo"></code></pre>

    <p id="playphotoupload-filename" class="filename">app/controllers/RegionController.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playphotoupload';
            getSrc("8b7fb4a", "app/controllers/RegionController.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/        /g, "").replace(/\.asMultipart/g, "\n    .asMultipart")).value);
                linkToFile(selectorId, '8b7fb4a', 125, 125);
            }, 125, 125)
        })})
    </script>
    <pre style="width: 900px;"><code id="playphotoupload"></code></pre>
</section>

<section>
    <h3>Testing - Grails</h3>
    <ul>
      <li>Unit Tests with @TestFor and @Mock</li>
      <li>Test URL Mappings with UrlMappingsUnitTestMixin</li>
      <li>Integration Testing with GroovyTestCase</li>
      <li>Functional Testing with Geb</li>
    </ul>
    <p id="grails-tests-filename" class="filename">test/unit/happytrails/RouteTests.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-tests';
            getSrc("443a814", "test/unit/happytrails/RouteTests.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre style="height: 350px"><code id="grails-tests"></code></pre>
    <p class="footnote"><small>* Grails plugins often aren't in test scope.</small></p>
</section>
<section>
    <h3>Testing - Play</h3>

    <ul>
        <li>Standard JUnit</li>
        <li>Unit Tests &amp; Functional Tests</li>
        <li>FakeApplication, FakeRequest, inMemoryDatabase</li>
        <li>Test: Controllers, Views, Routing, Real Server, Browser</li>
    </ul>

    <p id="playtest-filename" class="filename">test/ApplicationControllerTest.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playtest';
            getSrc("9e33de5", "test/ApplicationControllerTest.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '9e33de5', 18, 30);
            }, 18, 30)
        })})
    </script>
    <pre style="width: 900px; font-size: 17px"><code id="playtest"></code></pre>
</section>

<section>
    <h3>Demo Data - Grails</h3>

    <br/>

    <p id="grails-data-filename" class="filename">grails-app/conf/BootStrap.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-data';
            getSrc("443a814", "grails-app/conf/BootStrap.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '443a814');
            })
        })})
    </script>
    <pre style="max-height: 460px; font-size: .45em; width: 101%"><code id="grails-data"></code></pre>
</section>
<section>
    <h3>Demo Data - Play</h3>

    <br/>

    <p id="playdemodata-filename" class="filename">app/Global.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playdemodata';
            getSrc("9e33de5", "app/Global.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '9e33de5', 11, 23);
            }, 11, 23)
        })})
    </script>
    <pre><code id="playdemodata"></code></pre>
</section>

<section>
    <h3>Configuration - Grails</h3>

    <p id="grails-config-filename" class="filename">grails-app/conf/Config.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-config';
            getSrc("2b878a0", "grails-app/conf/Config.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '2b878a0');
            })
        })})
    </script>
    <pre style="max-height: 460px;"><code id="grails-config"></code></pre>
</section>
<section>
    <h3>Configuration - Play</h3>

    <ul>
        <li>Based on the TypeSafe Config Library</li>
        <li>Override config with Java Properties:<br/>-Dfoo=bar</li>
        <li>Environment Variable substitution</li>
        <li>Run with different config files:<br/>-Dconfig.file=conf/prod.conf</li>
    </ul>

    <p id="playconfig-filename" class="filename">conf/prod.conf</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playconfig';
            getSrc("860b7b4", "conf/prod.conf", function (content) {
                $(selectorId).html(hljs.highlightAuto(content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '860b7b4', 1, 7);
            }, 1, 7)
        })})
    </script>
    <pre><code id="playconfig"></code></pre>
</section>

<section>
    <h3>Authentication - Grails</h3>

    <p style="padding: 20px 0">Spring Security UI Plugin, <q>I love you!</q></p>

    <p id="grails-security-filename" class="filename">grails-app/conf/Config.groovy</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#grails-security';
            getSrc("103ac6a", "grails-app/conf/Config.groovy", function (content) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, '103ac6a', 115, 132);
            }, 115, 132)
        })})
    </script>
    <pre style="max-height: 460px;"><code id="grails-security"></code></pre>
</section>
<section>
    <h3>Authentication - Play</h3>

    <ul>
        <li>Uses cookies to remain stateless</li>
    </ul>

    <p id="playauthsecured-filename" class="filename">app/controllers/Secured.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playauthsecured';
            getSrc("9e33de5", "app/controllers/Secured.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '9e33de5', 9, 15);
            }, 9, 15)
        })})
    </script>
    <pre><code id="playauthsecured"></code></pre>

    <p id="playsecurity-filename" class="filename">app/controllers/RegionController.java</p>
    <script>
        $(function() { Reveal.addEventListener( 'ready', function( event ) {
            var selectorId = '#playsecurity';
            getSrc("8b7fb4a", "app/controllers/RegionController.java", function (content) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, '8b7fb4a', 105, 108);
            }, 105, 108)
        })})
    </script>
    <pre><code id="playsecurity"></code></pre>
</section>

</section>

<section>
  <section>
    <h2>Application Comparison</h2>
    <ul>
      <li><a href="#/8/1">YSlow</a></li>
      <li><a href="#/8/2">PageSpeed</a></li>
      <li><a href="#/8/3">Lines of Code</a></li>
      <li><a href="#/8/4">Load Testing</a></li>
      <li><a href="#/8/11">Which Loads Faster?</a></li>
      <li><a href="#/8/13">Security Testing</a></li>
    </ul>
  </section>
  <section>
    <h2 class="top">YSlow</h2>
    <div class="comparison">
      <img src="assets/images/yslow-bike.png" width="900"/>
      <img class="fragment" src="assets/images/yslow-hike.png" width="900"/>
    </div>
  </section>

  <section>
    <h2 class="top">PageSpeed</h2>
    <div class="comparison">
      <img src="assets/images/pagespeed-bike.png" width="900"/>
      <img class="fragment" src="assets/images/pagespeed-hike.png" width="900"/>
    </div>
  </section>

  <section>
    <h2 class="top">Lines of Code</h2>
    <div class="comparison">
      <img src="assets/images/cloc-grails.png" width="900"/>
      <img class="fragment" src="assets/images/cloc-play.png" width="900"/>
    </div>
  </section>

  <section>
    <h2>Load Testing with BrowserMob</h2>
    <img src="assets/images/neustar-dashboard.png" width="900"/>
  </section>

  <section>
    <h2>Load Testing - 1 Dyno</h2>

    <div style="width: 600px; margin: 0 auto">
      <div style="float: left">
        <img src="assets/images/bike-test-stats.png" height="253" width="257"/>

        <p>Bike (Grails)</p>
      </div>
      <div style="float: right">
        <img src="assets/images/hike-test-stats.png" height="253" width="257"/>

        <p>Hike (Play)</p>
      </div>
    </div>
  </section>

  <section>
    <h2 class="top">Load Testing - 1 Dyno</h2>

    <div class="comparison">
      <img src="assets/images/bike-throughput.png" width="900"/>
      <img class="fragment" src="assets/images/hike-throughput.png" width="900"/>
    </div>
  </section>

  <section>
    <h2>Load Testing - 5 Dynos</h2>

    <div style="width: 600px; margin: 0 auto">
      <div style="float: left">
        <img src="assets/images/bike-test-stats-5dynos.png" height="253" width="248"/>

        <p>Bike (Grails)</p>
      </div>
      <div style="float: right">
        <img src="assets/images/hike-test-stats-5dynos.png" height="253" width="248"/>

        <p>Hike (Play)</p>
      </div>
    </div>
  </section>

  <section>
    <h2 class="top">Load Testing - 5 Dynos</h2>
    <div class="comparison">
      <img src="assets/images/bike-throughput-5dynos.png" width="900"/>
      <img class="fragment" src="assets/images/hike-throughput-5dynos.png" width="900"/>

    </div>
  </section>

  <section style="text-align: center;">
    <h2>Load Testing - 2 Dynos (March 2013)</h2>
    <script>
        google.setOnLoadCallback(drawLoadChart);

        function drawLoadChart() {

           var data = google.visualization.arrayToDataTable([
                ['10000 Requests (100 Concurrent)', 'Grails', 'Play Framework'],
                ['Requests / Second', 1218, 2426]
            ]);

            var chart = new google.visualization.BarChart(document.getElementById('load_chart_div'));
            chart.draw(data, {width:900, height:500, hAxis: {viewWindow: {min:0}}});
        }
    </script>
    <div id="load_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
  </section>

    <section style="text-align: center;">
        <h2>Load Testing - 2 Dynos (Sept 2013)</h2>
        <script>
            google.setOnLoadCallback(drawLoadChart);

            function drawLoadChart() {

                var data = google.visualization.arrayToDataTable([
                    ['10000 Requests (100 Concurrent)', 'Grails', 'Play Framework'],
                    ['Requests / Second', 257, 242]
                ]);

                var chart = new google.visualization.BarChart(document.getElementById('load_chart_div-sept_2013'));
                chart.draw(data, {width:900, height:500, hAxis: {viewWindow: {min:0}}});
            }
        </script>
        <div id="load_chart_div-sept_2013" class="chart" style="width: 900px; height: 500px;"></div>
    </section>

  <section>
    <h2 class="top">Load Testing - 5 Dynos + 100 users</h2>
    <div class="comparison">
      <div>
        <img src="assets/images/bike-throughput-100users.png" width="900"/>
        <img src="assets/images/bike-stats-100users.png" style="position: absolute; top: 50px; right: 30px;"/>
      </div>
      <div class="fragment">
        <img src="assets/images/hike-throughput-100users.png" width="900"/>
        <img src="assets/images/hike-stats-100users.png" style="position: absolute; top: 50px; right: 30px;"/>
      </div>
    </div>
  </section>
  <section>
    <h2>Which Loads Faster?</h2>
    <img src="assets/images/whichloadsfaster.com.png" width="900"/>
  </section>
  <section>
    <h2>Which Actually Loads Faster?</h2>
    <img src="assets/images/whichloadsfaster.com-2.png" width="900"/>
  </section>
  <section>
    <h2 class="top">Pen Testing with OWASP ZAP</h2>
    <div class="comparison">
      <img src="assets/images/zap-grails.png" width="900"/>
      <img class="fragment" src="assets/images/zap-play.png" width="900"/>
    </div>
  </section>
</section>

<section>
    <section>
        <h2>Grails 2 vs. Play 2</h2>
        <ul>
            <li><a href="#/9/1">Jobs</a></li>
            <li><a href="#/9/2">LinkedIn Skills</a></li>
            <li><a href="#/9/3">Google Trends</a></li>
            <li><a href="#/9/4">Indeed</a></li>
            <li><a href="#/9/5">Mailing List Traffic</a></li>
            <li><a href="#/9/6">Books on Amazon</a></li>
            <li><a href="#/9/7">2012 Releases</a></li>
            <li><a href="#/9/8">Stack Overflow</a></li>
            <li><a href="#/9/9">Hacker News</a></li>
        </ul>
    </section>
    <section>
        <h2>Jobs</h2>
        <script>
            google.setOnLoadCallback(drawJobsChart);

            function drawJobsChart() {

                var data = google.visualization.arrayToDataTable([
                    ['Jobs', 'Grails', 'Play Framework', 'Spring MVC'],
                    ['Dice', 194, 38, 539],
                    ['Monster', 54, 18, 209],
                    ['Indeed', 851, 115, 1499]
                ]);

                var chart = new google.visualization.BarChart(document.getElementById('jobs_chart_div'));
                chart.draw(data, {width:900, height:500, title: 'September 22, 2013'});
            }
        </script>
        <div id="jobs_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>LinkedIn Skills</h2>
        <script>
            google.setOnLoadCallback(drawLinkedinChart);

            function drawLinkedinChart() {

                var data = google.visualization.arrayToDataTable([
                    ['Skill', '# People'],
                    ['Grails', 17303],
                    ['Play Framework', 5254],
                    ['Spring MVC', 17973]
                ]);

                var chart = new google.visualization.BarChart(document.getElementById('linkedin_chart_div'));
                chart.draw(data, {width:900, height:500, title: 'September 22, 2013'});
            }
        </script>
        <div id="linkedin_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
        <aside class="notes">
            Grails up 20% y/y, Play up 69%
        </aside>
    </section>
    <section>
        <h2>Google Trends</h2>
        <img src="assets/images/google-trends.png" style="width: 813px; height: 300px">
        <div class="legend">
            <span class="box blue"></span> Grails
            <span class="box red"></span> Play
        </div>
        <!--script type="text/javascript" src="//www.google.com/trends/embed.js?hl=en-US&q=Grails,+%22Play+Framework%22&content=1&cid=TIMESERIES_GRAPH_AVERAGES_CHART&export=5&w=500&h=300"></script-->
    </section>
    <section>
        <h2>Indeed Job Trends</h2>
        <p style="text-align: center">
          <img src="assets/images/indeed-absolute.png" width="777">
        </p>
    </section>
    <section>
        <h2>User Mailing List Traffic</h2>
        <script>
            google.setOnLoadCallback(drawMailingListChart);

            function drawMailingListChart() {
                new google.visualization.BarChart(document.getElementById('mailinglist_messages_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Messages', 'Grails', 'Play Framework'],
                    ['March', 931, 1443],
                    ['April', 863, 1448],
                    ['May', 1005, 1177],
                    ['June', 766, 1049],
                    ['July', 971, 858],
                    ['August', 922, 1033]
                ]), {width:900, height:500}
                );
            }
        </script>
        <div id="mailinglist_messages_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>Books on Amazon</h2>
        <script>
            google.setOnLoadCallback(drawBooksChart);

            function drawBooksChart() {
                new google.visualization.PieChart(document.getElementById('books_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Books', 'Amazon'],
                    ['Grails', 11],
                    ['Play Framework', 3]
                ]), {width:900, height:500, pieSliceText:'value', title: 'September 2013'});
            }
        </script>
        <div id="books_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>2013 Releases</h2>
        <script>
            google.setOnLoadCallback(drawReleasesChart);

            function drawReleasesChart() {
                new google.visualization.PieChart(document.getElementById('releases_chart_div2')).draw(google.visualization.arrayToDataTable([
                    ['2013 Releases', '2013'],
                    ['Grails', 8],
                    ['Play Framework', 10]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="releases_chart_div2" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>2012 Releases</h2>
        <script>
            google.setOnLoadCallback(drawReleasesChart);

            function drawReleasesChart() {
                new google.visualization.PieChart(document.getElementById('releases_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['2012 Releases', '2012'],
                    ['Grails', 9],
                    ['Play Framework', 6]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="releases_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>StackOverflow Questions</h2>
        <script>
            google.setOnLoadCallback(drawStackOverflowChart);

            function drawStackOverflowChart() {
                new google.visualization.PieChart(document.getElementById('stackoverflow_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Tagged Questions', '#'],
                    ['grails', 12978],
                    ['playframework', 5149]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="stackoverflow_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>Hacker News</h2>
        <script>
            google.setOnLoadCallback(drawHackerNewsChart);

            function drawHackerNewsChart() {
                new google.visualization.PieChart(document.getElementById('hackernews_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Stories', '# Votes'],
                    ['Grails 2.0 released', 6],
                    ['Play Framework 2.0 Final released', 195]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="hackernews_chart_div" class="chart" style="width: 900px; height: 500px;"></div>
    </section>
</section>

<section class="conclusions">
  <section>
    <h2>Conclusions: Code</h2>
    <ul>
      <li>From a code perspective, very similar frameworks.</li>
      <li>Code authoring good in both.</li>
      <li>Grails Plugin Ecosystem is excellent.</li>
      <li>TDD-Style Development easy with both.</li>
      <li>Type-safety in Play 2 was really useful, especially routes and upgrades.</li>
    </ul>
  </section>
  <section>
    <h2>Conclusions: Statistical Analysis</h2>
    <ul>
      <li>Grails has better support for FEO (YSlow, PageSpeed)</li>
      <li>Grails has less LOC! (4 more files, but 20% less code)</li>
      <li>Apache Bench with 10K requests (2 Dynos):
        <ul>
          <li>Requests per second: {Play: 242, Grails: 257}</li>
        </ul>
      </li>
      <li>Caching significantly helps!</li>
    </ul>
  </section>
  <section>
    <h2>Conclusions: Ecosystem Analysis</h2>
    <ul>
      <li>"Play" is difficult to search for.</li>
      <li>Grails is more mature.</li>
      <li>Play has momentum issues.</li>
      <li>LinkedIn: more people know Grails than Spring MVC.</li>
      <li>Play <em>had</em> 3x user mailing list traffic, but gap is narrowing.</li>
      <li>We had similar experiences with documentation and questions.</li>
      <li>Outdated documentation is a problem for both.</li>
      <li>Play has <em>way</em> more hype!</li>
    </ul>
  </section>
</section>

<section>
  <h2>Questions?</h2>
  <ul>
      <li><a href="http://ubertracks.com">http://ubertracks.com</a></li>
      <li>Source:
        <ul>
          <li><a href="https://github.com/jamesward/happytrails">https://github.com/jamesward/happytrails</a></li>
          <li>Branches: grails2, play2_java</li>
          <li>Presentation*: master/preso</li>
        </ul>
      </li>
      <li>
        Contact Us:
        <ul>
          <li><a href="http://www.jamesward.com/">jamesward.com</a></li>
          <li><a href="http://www.raibledesigns.com/">raibledesigns.com</a></li>
        </ul>
      </li>
  </ul>

  <p style="margin-top: 10px; font-size: 18px">* Presentation created with <a href="http://lab.hakim.se/reveal-js">Reveal.js</a>,
    <a href="https://developers.google.com/chart/">Google Charts</a> and
    <a href="http://www.jamesward.com/2012/06/15/dynamically-rendering-github-files-in-web-pages">GitHub Files</a>.</p>
</section>
<section>
    <h1>Action!</h1>

    <p><em>Learn something new*!</em></p>

    <a href="http://www.mcginityphoto.com/Nature/Nature/4725995_szrsM">
      <img src="https://www.mcginityphoto.com/Nature/Nature/i-WLmNjZW/0/M/ArcdeTriumphNov2011-M.jpg" width="600" height="399"/>
    </a>
    <p class="endnote">* Or prove that we're wrong...</p>
</section>
</div>

</div>

<script src="js/github-files.js"></script>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>
    // load the google charts library
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
            //{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/highlight/highlight.js', async: false, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
            { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
            //{ src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
            //{ src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
    });
</script>
</body>
</html>
